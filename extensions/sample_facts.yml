---
- name: create temporary local fact home (non-root)
  file:
    path: /tmp/local
    state: directory

- name: add local facts
  shell: |
    /usr/bin/echo "[local_facts]" > /tmp/local/local.fact
    chmod 644 /tmp/local/local.fact
  when: ansible_os_family != "Windows"

- name: insert custom fact script
  copy:
    src: custom_extensions/extensions/files/sampleFacts.sh
    dest: /tmp/local/sampleFacts.sh
    mode: '0755'

- name: add Instance facts
  shell: /tmp/local/sampleFacts.sh

- name: remove local fact  script
  file:
    path: /tmp/local/sampleFacts.sh
    state: absent

